#N canvas 26 22 1132 728 10;
#N canvas 0 22 450 300 (subpatch) 0;
#X array W 100 float 0;
#X coords 0 1 99 -1 400 140 1;
#X restore 633 441 graph;
#X msg 46 156 update \$1;
#X msg 85 239 beta \$1;
#X obj 299 62 tgl 15 0 empty empty empty 0 -6 0 8 -225280 -1 -1 1 1
;
#X obj 299 83 dsp;
#X floatatom 299 129 5 0 0 0 - - -;
#X floatatom 312 108 5 0 0 0 - - -;
#X text 662 278 2.arg: <float> learn-rate = beta;
#X obj 336 193 noise~;
#X msg 65 319 gamma \$1;
#X text 70 348 input signal;
#X text 344 295 desired signal;
#N canvas 0 22 450 300 (subpatch) 0;
#X array IR 40 float 0;
#X coords 0 1 39 -1 200 140 1;
#X restore 394 49 graph;
#X obj 54 540 unsig~;
#X floatatom 54 566 9 0 0 0 - - -;
#X obj 392 544 unsig~;
#X floatatom 392 564 9 0 0 0 - - -;
#X text 21 346 x(n);
#X text 449 295 d(n);
#X text 19 510 y(n) = W * x(n);
#X obj 336 278 FIR~ IR 32;
#X obj 612 103 loadbang;
#X text 712 267 (array-sizes have to be >= then FIR_size);
#X text 662 256 1.arg: <float> number of order of FIR-filter;
#N canvas 0 22 474 324 (subpatch) 0;
#X obj 48 46 inlet;
#X obj 205 47 inlet;
#X msg 205 71 \; IR const 0;
#X msg 48 120 \; IR 0 0 0 0 0.314287 0.8 0.75 0 0 0 0 -0.7 -0.65 0
0 0 0.157143 0.128572 0 0 -0.128572 -0.1 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0;
#X obj 92 84 loadbang;
#X connect 0 0 3 0;
#X connect 1 0 2 0;
#X connect 4 0 3 0;
#X restore 613 78 pd;
#X obj 626 60 bng 15 250 50 0 empty empty empty 0 -6 0 8 -262144 -1
-1;
#X text 643 57 clear;
#X obj 613 41 bng 15 250 50 0 empty empty empty 0 -6 0 8 -262144 -1
-1;
#X text 630 38 load;
#X text 638 80 IR;
#X text 4 495 filtered output signal;
#X text 395 422 error signal;
#X text 369 434 e(n) = d(n) - W * x(n);
#X obj 83 512 cnv 8 1 1 empty empty * 0 7 0 14 -262144 -1 0;
#X obj 482 436 cnv 8 1 1 empty empty * 0 7 0 14 -262144 -1 0;
#N canvas 0 22 470 320 (subpatch) 0;
#X obj 137 73 tgl 15 0 empty empty empty 0 -6 0 8 -262144 -1 -1 1 1
;
#X msg 137 115 39;
#X msg 137 156 \$1 39;
#X msg 136 53 1;
#X obj 137 92 metro 200;
#X obj 136 24 inlet;
#X obj 137 135 tabread W;
#X obj 137 180 tabwrite W;
#X connect 0 0 4 0;
#X connect 1 0 6 0;
#X connect 2 0 7 0;
#X connect 3 0 0 0;
#X connect 4 0 1 0;
#X connect 5 0 3 0;
#X connect 6 0 2 0;
#X restore 612 124 pd;
#X text 637 130 update of W;
#X text 636 119 graphical;
#X text 662 313 4.arg: <symbol> table-name of W;
#X text 126 301 minimum input value;
#X msg 226 195 0.1;
#X msg 65 281 1e-05;
#X text 138 240 beta [0 .. 2];
#X text 132 318 gamma [0 .. 1];
#X obj 663 213 cnv 15 68 17 empty empty empty 20 12 0 14 -225280 -66577
0;
#N canvas 0 22 499 295 FORMULAS 0;
#X obj 167 52 cnv 15 150 40 empty empty empty 20 12 0 14 -225280 -66577
0;
#X obj 167 123 cnv 15 270 50 empty empty empty 20 12 0 14 -225280 -66577
0;
#X obj 167 205 cnv 15 260 30 empty empty empty 20 12 0 14 -225280 -66577
0;
#X text 280 129 beta;
#X text 231 146 >;
#X text 232 144 _;
#X text 232 138 _;
#X text 283 141 2;
#X text 346 141 2;
#X text 311 146 gamma * blocksize);
#X text 300 146 +;
#X text 243 146 x[n-i];
#X text 174 135 my(n) =;
#X text 223 130 _________________________________;
#X text 16 135 normalized learn rate:;
#X text 173 56 y(n) = W * x(n);
#X obj 237 54 cnv 11 1 1 empty empty * 0 9 0 14 -225280 -1 0;
#X text 173 72 e(n) = d(n) - W * x(n);
#X obj 286 71 cnv 11 1 1 empty empty * 0 9 0 14 -225280 -1 0;
#X text 119 73 error:;
#X text 116 55 output:;
#X text 26 210 coefficient iteration:;
#X text 188 211 W(k+1 \, i) = W(k \, i) + my(n)* e(n)* x(n);
#X restore 664 213 pd FORMULAS;
#X obj 91 223 cnv 14 31 14 empty empty empty 20 12 0 14 -225280 -66577
0;
#X floatatom 85 222 6 0 2 0 - - -;
#X text 134 221 learn-rate;
#X obj 65 301 cnv 14 31 14 empty empty empty 20 12 0 14 -225280 -66577
0;
#X floatatom 65 301 8 0 2 0 - - -;
#X obj 347 389 -~;
#X text 232 431 err;
#X text 409 343 filt out;
#X msg 635 600 \; W const 0;
#X obj 28 365 delread~ causal_del 1.45126;
#X obj 392 325 delread~ feedback_del 1.45126;
#X msg 185 195 0.01;
#X msg 53 196 0;
#X msg 138 195 0.001;
#X obj 336 214 delwrite~ causal_del 20;
#X obj 67 472 delwrite~ feedback_del 20;
#X floatatom 111 690 9 0 0 0 - - -;
#X text 38 382 ref_filt;
#X text 155 404 ref_adapt;
#X obj 134 389 delread~ causal_del 2.90249;
#X obj 336 255 delread~ causal_del 2.90249;
#X obj 46 137 tgl 15 0 empty empty empty 0 -6 0 8 -225280 -1 -1 1 1
;
#X text 41 118 Update ON / OFF;
#X msg 147 629 128;
#X msg 109 629 64;
#X obj 110 667 / 44.1;
#X obj 299 665 samplerate~;
#X obj 299 647 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X floatatom 300 706 5 0 0 0 - - -;
#X obj 300 686 * 0.001;
#X floatatom 189 687 9 0 0 0 - - -;
#X msg 190 627 128;
#X obj 188 664 / 44.1;
#X msg 225 627 192;
#X obj 299 627 loadbang;
#X text 660 364 (C) 2010 \, t.musil & m.guldenschuh \, IEM \, Graz
\, Austria;
#X text 688 377 [musil | guldenschuh]_AT_iem.at;
#X text 662 173 Normalized Least Mean Square with separated error and
adaption reference input (linear adaptive FIR-filter);
#X obj 53 450 NLMSerr_in~ 100 0.003 1e-05 W;
#X msg 114 282 1e-07;
#X msg 85 195 0.0001;
#X text 662 290 3.arg: <float> minimum input value gamma for;
#X text 716 301 energy calculation;
#X text 46 44 NLMSerr_in~;
#X connect 1 0 84 0;
#X connect 2 0 84 0;
#X connect 3 0 4 0;
#X connect 4 0 5 0;
#X connect 4 1 6 0;
#X connect 8 0 60 0;
#X connect 9 0 84 0;
#X connect 13 0 14 0;
#X connect 15 0 16 0;
#X connect 20 0 51 0;
#X connect 21 0 35 0;
#X connect 25 0 24 1;
#X connect 27 0 24 0;
#X connect 40 0 47 0;
#X connect 41 0 50 0;
#X connect 47 0 2 0;
#X connect 50 0 9 0;
#X connect 51 0 15 0;
#X connect 51 0 84 2;
#X connect 55 0 84 0;
#X connect 56 0 51 1;
#X connect 57 0 47 0;
#X connect 58 0 47 0;
#X connect 59 0 47 0;
#X connect 62 0 56 0;
#X connect 62 0 55 0;
#X connect 65 0 84 1;
#X connect 66 0 20 0;
#X connect 67 0 1 0;
#X connect 69 0 71 0;
#X connect 70 0 71 0;
#X connect 71 0 62 0;
#X connect 72 0 75 0;
#X connect 73 0 72 0;
#X connect 75 0 74 0;
#X connect 75 0 71 1;
#X connect 75 0 78 1;
#X connect 77 0 78 0;
#X connect 78 0 76 0;
#X connect 78 0 66 0;
#X connect 78 0 65 0;
#X connect 79 0 78 0;
#X connect 80 0 73 0;
#X connect 84 0 13 0;
#X connect 84 0 61 0;
#X connect 85 0 50 0;
#X connect 86 0 47 0;
